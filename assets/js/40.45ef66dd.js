(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{195:function(t,a,s){t.exports=s.p+"assets/img/event-wakeup.88d386bb.png"},196:function(t,a){t.exports="data:image/png;base64,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"},557:function(t,a,s){"use strict";s.r(a);var n=[function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件","aria-hidden":"true"}},[t._v("#")]),t._v(" 事件")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#概述"}},[t._v("概述")]),n("ul",[n("li",[n("a",{attrs:{href:"#基本概念"}},[t._v("基本概念")])]),n("li",[n("a",{attrs:{href:"#运作机制"}},[t._v("运作机制")])])])]),n("li",[n("a",{attrs:{href:"#开发指导"}},[t._v("开发指导")]),n("ul",[n("li",[n("a",{attrs:{href:"#使用场景"}},[t._v("使用场景")])]),n("li",[n("a",{attrs:{href:"#功能"}},[t._v("功能")])]),n("li",[n("a",{attrs:{href:"#开发流程"}},[t._v("开发流程")])])])]),n("li",[n("a",{attrs:{href:"#注意事项"}},[t._v("注意事项")])]),n("li",[n("a",{attrs:{href:"#编程实例"}},[t._v("编程实例")]),n("ul",[n("li",[n("a",{attrs:{href:"#实例描述"}},[t._v("实例描述")])]),n("li",[n("a",{attrs:{href:"#编程示例"}},[t._v("编程示例")])]),n("li",[n("a",{attrs:{href:"#结果验证"}},[t._v("结果验证")])])])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"概述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#概述","aria-hidden":"true"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),n("h3",{attrs:{id:"基本概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本概念","aria-hidden":"true"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),n("p",[t._v("事件是一种实现任务间通信的机制，可用于实现任务间的同步，但事件通信只能是事件类型的通信，无数据传输。一个任务可以等待多个事件的发生：可以是任意一个事件发生时唤醒任务进行事件处理；也可以是几个事件都发生后才唤醒任务进行事件处理。事件集合用32位无符号整型变量来表示，每一位代表一个事件。")]),t._v(" "),n("p",[t._v("多任务环境下，任务之间往往需要同步操作，一个等待即是一个同步。事件可以提供一对多、多对多的同步操作。一对多同步模型：一个任务等待多个事件的触发；多对多同步模型：多个任务等待多个事件的触发。")]),t._v(" "),n("p",[t._v("任务可以通过创建事件控制块来实现对事件的触发和等待操作。Huawei LiteOS的事件仅用于任务间的同步，不提供数据传输功能。")]),t._v(" "),n("p",[t._v("Huawei LiteOS 提供的事件具有如下特点：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("事件不与任务相关联，事件相互独立，一个32位的变量，用于标识该任务发生的事件类型，其中每一位表示一种事件类型（0表示该事件类型未发生、1表示该事件类型已经发生），一共31种事件类型（第25位保留）。")])]),t._v(" "),n("li",[n("p",[t._v("事件仅用于任务间的同步，不提供数据传输功能。")])]),t._v(" "),n("li",[n("p",[t._v("多次向任务发送同一事件类型，等效于只发送一次。")])]),t._v(" "),n("li",[n("p",[t._v("允许多个任务对同一事件进行读写操作。")])]),t._v(" "),n("li",[n("p",[t._v("支持事件读写超时机制。")])])]),t._v(" "),n("h4",{attrs:{id:"事件控制块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件控制块","aria-hidden":"true"}},[t._v("#")]),t._v(" 事件控制块")]),t._v(" "),n("div",{staticClass:"language-c extra-class"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("/**\n * @ingroup los_event\n * Event control structure\n */")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("typedef")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" tagEvent\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    UINT32 uwEventID"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("            "),n("span",{attrs:{class:"token comment"}},[t._v("/**标识发生的事件类型位*/")]),t._v("\n    LOS_DL_LIST    stEventList"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{attrs:{class:"token comment"}},[t._v("/**读取事件任务链表*/")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" EVENT_CB_S"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("PEVENT_CB_S"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[n("code",[t._v("uwEventID")]),t._v("：用于标识该任务发生的事件类型，其中每一位表示一种事件类型（0表示该事件类型未发生、1表示该事件类型已经发生），一共31种事件类型，第25位系统保留。")]),t._v(" "),n("h4",{attrs:{id:"事件读取模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件读取模式","aria-hidden":"true"}},[t._v("#")]),t._v(" 事件读取模式")]),t._v(" "),n("p",[t._v("在读事件时，可以选择读取模式。读取模式如下：")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("所有事件（"),n("code",[t._v("LOS_WAITMODE_AND")]),t._v("）：读取掩码中所有事件类型，只有读取的所有事件类型都发生了，才能读取成功。")])]),t._v(" "),n("li",[n("p",[t._v("任一事件（"),n("code",[t._v("LOS_WAITMODE_OR")]),t._v("）： 读取掩码中任一事件类型，读取的事件中任意一种事件类型发生了，就可以读取成功。")])]),t._v(" "),n("li",[n("p",[t._v("清除事件（"),n("code",[t._v("LOS_WAITMODE_CLR")]),t._v("）：LOS_WAITMODE_AND| LOS_WAITMODE_CLR或 LOS_WAITMODE_OR| LOS_WAITMODE_CLR 时表示读取成功后，对应事件类型位会自动清除。")])])]),t._v(" "),n("h3",{attrs:{id:"运作机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运作机制","aria-hidden":"true"}},[t._v("#")]),t._v(" 运作机制")]),t._v(" "),n("p",[t._v("读事件时，可以根据入参事件掩码类型uwEventMask读取事件的单个或者多个事件类型。事件读取成功后，如果设置LOS_WAITMODE_CLR会清除已读取到的事件类型，反之不会清除已读到的事件类型，需显式清除。可以通过入参选择读取模式，读取事件掩码类型中所有事件还是读取事件掩码类型中任意事件。")]),t._v(" "),n("p",[t._v("写事件时，对指定事件写入指定的事件类型，可以一次同时写多个事件类型。写事件会触发任务调度。")]),t._v(" "),n("p",[t._v("清除事件时，根据入参事件和待清除的事件类型，对事件对应位进行清0操作。")]),t._v(" "),n("p",[t._v("事件唤醒任务示意图")]),t._v(" "),n("p",[n("img",{attrs:{src:s(195),alt:""}})]),t._v(" "),n("h2",{attrs:{id:"开发指导"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开发指导","aria-hidden":"true"}},[t._v("#")]),t._v(" 开发指导")]),t._v(" "),n("h3",{attrs:{id:"使用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用场景","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用场景")]),t._v(" "),n("p",[t._v("事件可应用于多种任务同步场合，能够一定程度替代信号量。")]),t._v(" "),n("h3",{attrs:{id:"功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#功能","aria-hidden":"true"}},[t._v("#")]),t._v(" 功能")]),t._v(" "),n("p",[t._v("Huawei LiteOS系统中的事件模块为用户提供下面几个接口。")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("功能分类")]),t._v(" "),n("th",[t._v("接口名")]),t._v(" "),n("th",[t._v("描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("事件初始化")]),t._v(" "),n("td",[n("code",[t._v("LOS_EventInit")])]),t._v(" "),n("td",[t._v("初始化一个事件控制块")])]),t._v(" "),n("tr",[n("td",[t._v("读事件")]),t._v(" "),n("td",[n("code",[t._v("LOS_EventRead")])]),t._v(" "),n("td",[t._v("读取指定事件类型，超时时间为相对时间：单位为Tick")])]),t._v(" "),n("tr",[n("td",[t._v("写事件")]),t._v(" "),n("td",[n("code",[t._v("LOS_EventWrite")])]),t._v(" "),n("td",[t._v("写指定的事件类型")])]),t._v(" "),n("tr",[n("td",[t._v("清除事件")]),t._v(" "),n("td",[n("code",[t._v("LOS_EventClear")])]),t._v(" "),n("td",[t._v("清除指定的事件类型")])]),t._v(" "),n("tr",[n("td",[t._v("校验事件掩码")]),t._v(" "),n("td",[n("code",[t._v("LOS_EventPoll")])]),t._v(" "),n("td",[t._v("根据用户传入的事件值、事件掩码及校验模式，返回用户传入的事件是否符合预期")])]),t._v(" "),n("tr",[n("td",[t._v("销毁事件")]),t._v(" "),n("td",[n("code",[t._v("LOS_EventDestroy")])]),t._v(" "),n("td",[t._v("销毁指定的事件控制块")])])])]),t._v(" "),n("h3",{attrs:{id:"开发流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开发流程","aria-hidden":"true"}},[t._v("#")]),t._v(" 开发流程")]),t._v(" "),n("p",[t._v("使用事件模块的典型流程如下：")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("调用事件初始化 "),n("code",[t._v("LOS_EventInit")]),t._v(" 接口，初始化事件等待队列。")])]),t._v(" "),n("li",[n("p",[t._v("写事件 "),n("code",[t._v("LOS_EventWrite")]),t._v("，配置事件掩码类型。")])]),t._v(" "),n("li",[n("p",[t._v("读事件 "),n("code",[t._v("LOS_EventRead")]),t._v("，可以选择读取模式。")])]),t._v(" "),n("li",[n("p",[t._v("清除事件 "),n("code",[t._v("LOS_EventClear")]),t._v("，清除指定的事件类型。")])])]),t._v(" "),n("h2",{attrs:{id:"注意事项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注意事项","aria-hidden":"true"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("在系统初始化之前不能调用读写事件接口。如果调用，则系统运行会不正常。")])]),t._v(" "),n("li",[n("p",[t._v("在中断中，可以对事件对象进行写操作，但不能读操作。")])]),t._v(" "),n("li",[n("p",[t._v("在锁任务调度状态下，禁止任务阻塞与读事件。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("LOS_EventClear")]),t._v(" 入参值是：要清除的指定事件类型的反码（~uwEvents）。")])]),t._v(" "),n("li",[n("p",[t._v("事件掩码的第25位不能使用，原因是为了区别 "),n("code",[t._v("LOS_EventRead")]),t._v(" 接口返回的是事件还是错误码。")])])]),t._v(" "),n("h2",{attrs:{id:"编程实例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编程实例","aria-hidden":"true"}},[t._v("#")]),t._v(" 编程实例")]),t._v(" "),n("h3",{attrs:{id:"实例描述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实例描述","aria-hidden":"true"}},[t._v("#")]),t._v(" 实例描述")]),t._v(" "),n("p",[t._v("示例中，任务 "),n("code",[t._v("Example_TaskEntry")]),t._v(" 创建一个任务 "),n("code",[t._v("Example_Event")]),t._v("，"),n("code",[t._v("Example_Event")]),t._v(" 读事件阻塞，Example_TaskEntry向该任务写事件。")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("在任务 "),n("code",[t._v("Example_TaskEntry")]),t._v(" 创建任务 "),n("code",[t._v("Example_Event")]),t._v("，其中任务 "),n("code",[t._v("Example_Event")]),t._v(" 优先级高于 "),n("code",[t._v("Example_TaskEntry")]),t._v("。")])]),t._v(" "),n("li",[n("p",[t._v("在任务 "),n("code",[t._v("Example_Event")]),t._v(" 中读事件 0x00000001，阻塞，发生任务切换，执行任务 "),n("code",[t._v("Example_TaskEntry")]),t._v("。")])]),t._v(" "),n("li",[n("p",[t._v("在任务 "),n("code",[t._v("Example_TaskEntry")]),t._v(" 向任务 "),n("code",[t._v("Example_Event")]),t._v(" 写事件 0x00000001，发生任务切换，执行任务 "),n("code",[t._v("Example_Event")]),t._v("。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("Example_Event")]),t._v(" 得以执行，直到任务结束。")])]),t._v(" "),n("li",[n("p",[n("code",[t._v("Example_TaskEntry")]),t._v(" 得以执行，直到任务结束。")])])]),t._v(" "),n("h3",{attrs:{id:"编程示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编程示例","aria-hidden":"true"}},[t._v("#")]),t._v(" 编程示例")]),t._v(" "),n("p",[t._v("可以通过打印的先后顺序理解事件操作时伴随的任务切换。")]),t._v(" "),n("p",[t._v("代码实现如下：")]),t._v(" "),n("div",{staticClass:"language-c extra-class"},[n("pre",{pre:!0,attrs:{class:"language-c"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("/*任务PID*/")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" UINT32 g_TestTaskID"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("/*事件控制结构体*/")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("static")]),t._v(" EVENT_CB_S  example_event"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("/*等待的事件类型*/")]),t._v("\n"),n("span",{attrs:{class:"token macro property"}},[t._v("#"),n("span",{attrs:{class:"token directive keyword"}},[t._v("define")]),t._v(" event_wait 0x00000001")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("/*用例任务入口函数*/")]),t._v("\nVOID "),n("span",{attrs:{class:"token function"}},[t._v("Example_Event")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VOID"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    UINT32 uwEvent"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    UINT32 uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" LOS_OK"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/*超时 等待方式读事件,超时时间为100 Tick\n    若100 Tick 后未读取到指定事件，读事件超时，任务直接唤醒*/")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Example_Event wait event 0x%x \\r\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("event_wait"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    uwEvent "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_EventRead")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("example_event"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event_wait"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" LOS_WAITMODE_AND"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("100")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uwEvent "),n("span",{attrs:{class:"token operator"}},[t._v("==")]),t._v(" event_wait"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Example_Event,read event :0x%x\\r\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("uwEvent"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_InspectStatusSetByID")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LOS_INSPECT_EVENT"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("LOS_INSPECT_STU_SUCCESS"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LOS_OK "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" uwRet"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{attrs:{class:"token function"}},[t._v("printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Set Inspect Status Err\\r\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Example_Event,read event timeout\\r\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_InspectStatusSetByID")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LOS_INSPECT_EVENT"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("LOS_INSPECT_STU_ERROR"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("LOS_OK "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" uwRet"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  \n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{attrs:{class:"token function"}},[t._v("printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Set Inspect Status Err\\r\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nUINT32 "),n("span",{attrs:{class:"token function"}},[t._v("Example_SndRcvEvent")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VOID"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    UINT32 uwRet"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    TSK_INIT_PARAM_S stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/*事件初始化*/")]),t._v("\n    uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_EventInit")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("example_event"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" LOS_OK"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"init event failed .\\r\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" LOS_NOK"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/*创建任务*/")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("memset")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("0")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("sizeof")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TSK_INIT_PARAM_S"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pfnTaskEntry "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TSK_ENTRY_FUNC"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("Example_Event"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pcName       "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"EventTsk1"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uwStackSize  "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" LOSCFG_BASE_CORE_TSK_DEFAULT_STACK_SIZE"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("usTaskPrio   "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("5")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_TaskCreate")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("g_TestTaskID"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("stTask1"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" LOS_OK"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"task create failed .\\r\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" LOS_NOK"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/*写用例任务等待的事件类型*/")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"Example_TaskEntry_Event write event .\\r\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("LOS_EventWrite")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("example_event"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" event_wait"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("if")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("uwRet "),n("span",{attrs:{class:"token operator"}},[t._v("!=")]),t._v(" LOS_OK"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"event write failed .\\r\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" LOS_NOK"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{attrs:{class:"token comment"}},[t._v("/*清标志位*/")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"EventMask:%d\\r\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("example_event"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uwEventID"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("LOS_EventClear")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("example_event"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("~")]),t._v("example_event"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uwEventID"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token function"}},[t._v("printf")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"EventMask:%d\\r\\n"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("example_event"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("uwEventID"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" LOS_OK"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])])]),n("h3",{attrs:{id:"结果验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#结果验证","aria-hidden":"true"}},[t._v("#")]),t._v(" 结果验证")]),t._v(" "),n("p",[t._v("编译运行得到的结果为："),n("br"),t._v(" "),n("img",{attrs:{src:s(196),alt:""}})])])}],v=s(0),_=Object(v.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);_.options.__file="event.md";a.default=_.exports}}]);